<?xml version="1.0" encoding="UTF-8"?>
<api context="/integration-api" name="integration-api" xmlns="http://ws.apache.org/ns/synapse">
    <resource methods="POST" uri-template="/enhance_and_add_to_purchased_q">
        <inSequence>
            <sequence key="service_chain_to_get_item_info_seq"/>
            <respond description="200 OK Response"/>
        </inSequence>
        <faultSequence>
        </faultSequence>
    </resource>
    <resource methods="POST" uri-template="/validate_and_add_purchase">
        <inSequence>
            <sequence key="schema_validation_seq"/>
            <respond/>
        </inSequence>
        <faultSequence>
        </faultSequence>
    </resource>
    <resource methods="POST" uri-template="/validate_iterate_enhance_publish">
        <inSequence>
            <sequence key="id_schema_validation_seq"/>
            <iterate   expression="json-eval($.orders)" id="iterateOrder"  >
                <target sequence="id_service_chain_to_get_item_info_seq"/>
            </iterate>
            <respond/>
        </inSequence>
        <faultSequence>
        </faultSequence>
    </resource>
    <resource methods="GET" uri-template="/test-be">
        <inSequence>
        <call >
                <endpoint key="GetTest"/>
            </call>
            <respond/>
        </inSequence>
        <faultSequence>
        </faultSequence>
    </resource>
</api>